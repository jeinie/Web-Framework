{"ast":null,"code":"var _jsxFileName = \"/Users/jangjeong-yun/2022_2_lecture/WebFramework/Web-Framework/Prac/ch08/ex/proj/ex08-01-4/src/components/GetData.js\",\n  _s = $RefreshSig$();\n/**\r\n * ch08/ex/proj/ex08-01-4\r\n * ./src/GetData.js\r\n */\n\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet count = 0;\n\n/* ch08-01-3.html: XMLHttpRequest() with promise */\n\n// define function: getDataFromUrl(method, url) returns promise\n// create, initialize and send object from XMLHttpRequest \n// handle readystatechange event: resolve() or reject()\n/* code here */\nconst getDataFromUrl = (method, urls) => new Promise((resolve, reject) => {\n  const xhr = new XMLHttpRequest();\n  xhr.onreadystatechange = () => {\n    if (xhr.status === xhr.DONE) {\n      if (xhr.status === 200 || xhr.status === 201) {\n        resolve(xhr.response);\n      } else reject(xhr.response);\n    }\n  };\n  xhr.open(method, urls);\n  xhr.send();\n});\nexport const XHRPromise = _ref => {\n  _s();\n  let {\n    login\n  } = _ref;\n  const [data, setData] = useState();\n  console.log(\"XHRPromise(): \", ++count);\n  useEffect(() => {\n    if (!login) return;\n    getDataFromUrl('GET', `https://api.github.com/users/${login}`).then(setData).catch(console.error);\n  }, [login]);\n  if (data) return /*#__PURE__*/_jsxDEV(\"pre\", {\n    children: data\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 20\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"No data\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 10\n  }, this);\n};\n_s(XHRPromise, \"WZ2PO9A64oHRexE1CE+yX3ebuoA=\");\n_c = XHRPromise;\nvar _c;\n$RefreshReg$(_c, \"XHRPromise\");","map":{"version":3,"names":["useState","useEffect","count","getDataFromUrl","method","urls","Promise","resolve","reject","xhr","XMLHttpRequest","onreadystatechange","status","DONE","response","open","send","XHRPromise","login","data","setData","console","log","then","catch","error"],"sources":["/Users/jangjeong-yun/2022_2_lecture/WebFramework/Web-Framework/Prac/ch08/ex/proj/ex08-01-4/src/components/GetData.js"],"sourcesContent":["/**\r\n * ch08/ex/proj/ex08-01-4\r\n * ./src/GetData.js\r\n */\r\n\r\nimport { useState, useEffect } from \"react\";\r\nlet count = 0;\r\n\r\n/* ch08-01-3.html: XMLHttpRequest() with promise */\r\n\r\n// define function: getDataFromUrl(method, url) returns promise\r\n// create, initialize and send object from XMLHttpRequest \r\n// handle readystatechange event: resolve() or reject()\r\n/* code here */\r\nconst getDataFromUrl = (method, urls) => new Promise((resolve, reject) => {\r\n  const xhr = new XMLHttpRequest();\r\n  xhr.onreadystatechange = () => {\r\n    if (xhr.status === xhr.DONE) {\r\n      if (xhr.status === 200 || xhr.status === 201) {\r\n        resolve(xhr.response);\r\n      } else reject(xhr.response);\r\n    }\r\n  };\r\n  xhr.open(method, urls);\r\n  xhr.send();\r\n})\r\n\r\nexport const XHRPromise = ({ login }) => {\r\n  const [data, setData] = useState();\r\n  console.log(\"XHRPromise(): \", ++count);\r\n  \r\n  useEffect(() => {\r\n    if (!login) return;\r\n\r\n    getDataFromUrl('GET', `https://api.github.com/users/${login}`)\r\n    .then(setData)\r\n    .catch(console.error);\r\n  }, [login]);\r\n\r\n  if (data) return <pre>{data}</pre>;\r\n  return <div>No data</div>;\r\n}"],"mappings":";;AAAA;AACA;AACA;AACA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC;AAC5C,IAAIC,KAAK,GAAG,CAAC;;AAEb;;AAEA;AACA;AACA;AACA;AACA,MAAMC,cAAc,GAAG,CAACC,MAAM,EAAEC,IAAI,KAAK,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;EACxE,MAAMC,GAAG,GAAG,IAAIC,cAAc,EAAE;EAChCD,GAAG,CAACE,kBAAkB,GAAG,MAAM;IAC7B,IAAIF,GAAG,CAACG,MAAM,KAAKH,GAAG,CAACI,IAAI,EAAE;MAC3B,IAAIJ,GAAG,CAACG,MAAM,KAAK,GAAG,IAAIH,GAAG,CAACG,MAAM,KAAK,GAAG,EAAE;QAC5CL,OAAO,CAACE,GAAG,CAACK,QAAQ,CAAC;MACvB,CAAC,MAAMN,MAAM,CAACC,GAAG,CAACK,QAAQ,CAAC;IAC7B;EACF,CAAC;EACDL,GAAG,CAACM,IAAI,CAACX,MAAM,EAAEC,IAAI,CAAC;EACtBI,GAAG,CAACO,IAAI,EAAE;AACZ,CAAC,CAAC;AAEF,OAAO,MAAMC,UAAU,GAAG,QAAe;EAAA;EAAA,IAAd;IAAEC;EAAM,CAAC;EAClC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGpB,QAAQ,EAAE;EAClCqB,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAE,EAAEpB,KAAK,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd,IAAI,CAACiB,KAAK,EAAE;IAEZf,cAAc,CAAC,KAAK,EAAG,gCAA+Be,KAAM,EAAC,CAAC,CAC7DK,IAAI,CAACH,OAAO,CAAC,CACbI,KAAK,CAACH,OAAO,CAACI,KAAK,CAAC;EACvB,CAAC,EAAE,CAACP,KAAK,CAAC,CAAC;EAEX,IAAIC,IAAI,EAAE,oBAAO;IAAA,UAAMA;EAAI;IAAA;IAAA;IAAA;EAAA,QAAO;EAClC,oBAAO;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAkB;AAC3B,CAAC;AAAA,GAdYF,UAAU;AAAA,KAAVA,UAAU;AAAA;AAAA"},"metadata":{},"sourceType":"module"}